<!-- 
<button type="button" [routerLink]="['/Standard', username]">STANDARD Home Page</button>
<h1>Progress Submission Form</h1> -->

<!-- <div class="spacing"><button class="home-btn" type="button" [routerLink]="['/Standard', username]" mat-raised-button>Home Page</button></div> -->
<div class="spacing">
  <button class="homebtn" type="button" [routerLink]="['/Standard', username]" mat-raised-button>Home Page</button>
</div>
<br>

<table>
  <tr>
    <!-- SECTION 1 -->
    <td width="50%">
      <h1>Progress Submission Form</h1>
      <br><br>
      <form class="form-details" [formGroup]="progressSubmissionForm" (ngSubmit)="saveUpdatedData()">
        <table>
          <tr>
            <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>    
            <td>Service Request:  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
            <td colspan="2">
              <mat-form-field>
                <mat-label>Select ID</mat-label>
                <mat-select formControlName="requestID">
                  <mat-option *ngFor="let i of reqListIDs$|async as IDs" [value]="i.requestID">
                    [{{i.requestID}}] {{i.request}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </td>
          </tr>
          <tr>
            <td></td>
            <td>Upload Image:</td>
            <td style="font-size: 20px">
              <input type="file" accept="images/*" formControlName="fixedphoto" #photoElem (input)="uploadedTrue()">
            </td>
          </tr>
          <br><br>
          <tr>
            <td></td>
            <td colspan="2" >
              <button class="btns" type="button" (click)=addUpdatedImg() [disabled]="progressSubmissionForm.invalid">Add Submission</button>
              &nbsp;&nbsp;&nbsp;
              <!-- <button *ngIf="updatedReq$ | async as updReqs" class="btns" type="submit" [disabled]="updReqs.length <= 0" >Submit</button> -->
              <button class="btns" type="submit" [disabled]="listOfReq.length <= 0" >Submit</button>

              <!-- <button class="btns" type="button" (click)="addRequest()" [disabled]="isInvalid(serviceRequestForm.value.duedate)">Add Request</button>
              &nbsp;&nbsp;
              <button class="btns" *ngIf="req$ | async as reqs" type="submit" [disabled]="reqs.length <= 0">Submit</button> -->
            </td>
          </tr>
        </table>
      </form>
    </td>
  



  <!-- SECTION 2 -->
    <td class="results-table" width="50%">
      <!-- <div class="spacing-table" *ngIf="updatedReq$ | async as updReqs"> -->
        <!-- {{updReqs|json}} -->
      <div class="spacing-table">
        <div *ngIf="listOfReq.length ; else noReq">
          <h2><u>Submissions Added:</u></h2>
          <br><br>
          <table class="table table-striped" style="text-align: center">
            <thead style="font-weight: bolder; font-size: 20px;">
              <tr>
                <th>ID</th>
                <th>Service Request</th>
                <th>Manager</th>
                <th>Contractor</th>
                <th>Location</th>
                <th>Due Date</th>
                <th>Completed Date</th>
                <th>Priority</th>
                <th>Issue Image</th>
                <th>Resolved Image</th>
                <th>Delete</th>
                
              </tr>
            </thead>
            <tbody>              
                <tr *ngFor="let r of listOfReq">
                  <td width="2%">{{r.requestID}}</td>
                  <td width="16%">{{r.request}}</td>
                  <td width="8%">{{r.adminname}}</td>
                  <td width="8%">{{r.contractorname}}</td>
                  <td width="12%">{{r.locationaddress}}</td>
                  <td width="13%">{{r.duedate}}</td>
                  <td width="15%">{{r.completeddate}}</td>
                  <td width="2%">{{r.priority}}</td>
                  <td width="12%">
                    <img class="img-crop" src = "{{r.photo}}">
                  </td>
                  <td width="12%">
                    <img class="img-crop" src = "{{r.fixedphoto}}">
                  </td>
                  <td>
                    <button width="2%" type="button" class="del-btn2" (click)="deleteRequest(r.requestID)" mat-button>X</button>
                  </td>
                </tr>
            </tbody>
          </table>
        </div>
      </div>
      
      <ng-template #noReq>
        <h2><u>No Submissions Added:</u></h2>
      </ng-template>
    </td>
  </tr>
</table>











<!-- add location -->

<!-- <form [formGroup]="progressSubmissionForm" (submit)="saveUpdatedData()">
    <table>
        <tr>
            <td>Service Request:</td>
            <td>
                <select *ngIf="reqListIDs$ | async as IDs">
                    <option *ngFor="let i of IDs" value={{i.requestID}} #requestID>
                        [{{i.requestID}}] {{i.request}}
                    </option>
                </select>
            </td>
        </tr>
        
        <tr>
            <td>Upload Image:</td>
            <td>
              <input type="file" accept="images/*" formControlName="fixedphoto" #photoElem (input)="uploadedTrue()">
              
            <td>
            <td *ngIf="uploaded">
              <button type="button" (click)="deleteUploadedPhoto()">X</button>
            </td>
        </tr>

        <button type="button" (click)=addUpdatedImg()>Add Submission</button>
        <button type="submit" >Submit</button>
      </table>
      <br>
  </form> -->

        <!-- <tr>
            <td>Due Date:</td>
            <td><input type="date" formControlName="duedate" (input)="isInvalid(serviceRequestForm.value.duedate)">&nbsp;{{message}}</td>
        </tr> -->

        <!-- <tr>
            <td>Priority:</td>
            <td><input type="number" min="1" max="5" formControlName="priority">&nbsp; <i>(1-most impt, 5-least impt)</i></td>
        </tr>
        <tr>
            <td>Upload Image:</td>
            <td>
              <input type="file" accept="images/*" formControlName="photo" #photoElem (input)="uploadedTrue()"> -->
              
              <!-- <input type="file" accept="images/*" formControlName="photo" #photo (input)="uploadedTrue()" [style.display]="previewOn ? 'none' : 'block'"> -->
            <!-- <td>
            <td *ngIf="uploaded">
              <button type="button" (click)="deleteUploadedPhoto()">X</button>
            </td>
        </tr>
        <tr>
          <td>Location:</td>
          <td>
            <app-map-main #autocomplete3>
            </app-map-main>
            <input type="checkbox" (click)="confirmlocation()" formControlName="confirm">Confirm Location

          </td> -->
        <!-- </tr>   -->
 


<!-- --------------------------------------- -->
