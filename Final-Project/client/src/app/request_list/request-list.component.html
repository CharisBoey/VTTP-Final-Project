<button type="button" [routerLink]="['/Admin', username]">ADMIN Home Page</button>
<button type="button" [routerLink]="['/Standard', username]">STANDARD Home Page</button>

<br><br><br>

<h1>Request List</h1>
<br>
<div class="spacing" *ngIf="reqList$ | async as reqs">

    <!-- {{reqs|json}} border="1"-->

    <table class="table table-striped" style="text-align: center">
        <thead style="font-size: 20px;">
          <tr>
            <th>ID</th>
            <th>Service Request</th>
            <th>Manager Name</th>
            <th>Contractor Name</th>
            <th>Location</th>
            <th>Due Date</th>
            <th>Priority</th>
            <th>Issue Image</th>
            <th>Fixed Image</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          
            <tr *ngFor="let r of reqs">
              <td style="width: 3%">{{ r.requestID }}</td>
              <td style="width: 12%">{{ r.request }}</td>
              <td style="width: 12%">{{ r.adminname }}</td>
              <td style="width: 12%">
                <div *ngIf="r.contractorname; else defaultcontractname">
                {{ r.contractorname }}
                </div>
                <ng-template #defaultcontractname>
                  ---NIL---
                </ng-template>
              </td>
              
              <td style="width: 10%">{{ r.locationaddress }}</td>
              <td style="width: 3%">{{ r.duedate }}</td>
              <td style="width: 3%">{{ r.priority }}</td>
              <td style="width: 15%">
                <img width=300px src="{{r.photo}}">
              </td>
              
              <td>
              <div style="text-align: center; vertical-align: middle;" *ngIf="r.fixedphoto; else defaultphoto" style="width: 15%">
                <img class="photo" width=300px src = "{{r.fixedphoto}}">
              </div>
              <ng-template #defaultphoto>
                <img width=300px src = "/assets/logos/WorkInProgress.png">

              </ng-template>
              </td>
              
              <!-- <td style="width: 20%"><img width=300px src="/assets/logos/WorkInProgress.png">EITHER INPUT IMAGE OR DEFAULT</td> -->
              <!-- <td style="width: 10%">Approved/Not Approved/Pending Completion/To be Validated</td> -->
              <!-- <td style="width: 10%">{{r.approvalstatus}}</td> -->
              <td style="width: 5%">
                <img width=300px src="/assets/logos/{{r.approvalstatus}}.png">
                <div *ngIf="r.rejectreason">
                 {{r.rejectreason}}
                </div>
                <button mat-button (click)="updateStatus(r.requestID)">Update Status</button>
              </td>

              <td style="width: 10%">
                <button type="button" (click)="scheduledate(r.requestID, r.locationaddress)">Schedule Date</button> 
              </td>



              <!-- <td style="width: 10%">
                <button type="button" (click)="review()">Review & Process Submission</button>
              </td> -->
              <!-- <button type="button" (click)="slack(r.requestID)">SLACK TEST</button>  -->

              
            </tr>
        </tbody>
    </table>
</div>
